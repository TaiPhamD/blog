{
  "hash": "ba74a3f81dd46b6a73875552511cb73a",
  "result": {
    "markdown": "---\ntitle: Apple Silicon Stable-Diffusion\nauthor: Peter Pham\ndate: '2022-09-03'\ncategories:\n  - Pytorch\n  - M1\n  - AI\nimage: uefi_logo.png\nformat:\n  html:\n    code-fold: true\n---\n\n# Summary of install macOS stable diffusion\n\n1. Install Miniconda for apple m1 (make sure to download the .pkg for m1 and not the intel x64 version):\nhttps://docs.conda.io/en/latest/miniconda.html\n\n2. Clone stable difusion using lstein branch to support m1 and web host UI features (Dream.py). Open macOS terminal:\n```bash\ngit clone https://github.com/corajr/stable-diffusion.git\ncd stable-diffusion\n```\n\n3. Download the pretrained model from https://huggingface.co/CompVis/stable-diffusion-v-1-4-original . Supposedly **sd-v1-4-full-ema.ckpt** gives better result but the file size is ~7.7GB.\n\n4. Create folder to copy the model **sd-v1-4-full-ema.ckpt** to this path. Rename the model to **model.ckpt**\n```bash\nmkdir -p models/ldm/stable-diffusion-v1/\n# This assumes you downloaded sd-v1-4-full-ema.ckpt to ~/Downloads\nmv ~/Downloads/sd-v1-4-full-ema.ckpt models/ldm/stable-diffusion-v1/model.ckpt\n```\n\n5. Install dependencies to run stable-diffusion\n```bash\ncurl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n\nsource \"$HOME/.cargo/env\"\n\nPIP_EXISTS_ACTION=w CONDA_SUBDIR=osx-arm64 conda env create -f environment-mac.yaml\n\nconda activate ldm\n\npython scripts/preload_models.py\n```\n\n6. Run stable-diffusion with --web parameter to enable web UI\n\n```bash\npython scripts/dream.py --web\n```\n\n# Running stable-diffusion after initial setup\n\n1. Open macOS terminal:\n```bash\n# go to the path where you cloned stable-diffusion\ncd stable-diffusion\npython scripts/dream.py --web\n``` \n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}